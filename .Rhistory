countries <- unique(mydata3$country_text_id)
temp1 <- expand_grid(year = c(1789:2022),
country_text_id = unique(mydata1$country_text_id)) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0
)
) %>%
arrange(., country_text_id)
mydata3 <- temp1
rm(list = c("temp1"))
temp1 <- expand_grid(year = c(1789:2022),
country_text_id = unique(mydata1$country_text_id)) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0
)
) %>%
arrange(., country_text_id)
mydata3 <- temp1
rm(list = c("temp1"))
# Load and clean data ----
mydata1 <- read_csv("~/Documents/Data/V_Dem_v13.csv") %>%
mutate(., region = as_factor(e_regionpol)) %>% # Recoding regions as factors
select(., c("country_name", "country_text_id", "year", "v2x_polyarchy", "v2x_clphy",
"v2exl_legitperf", "e_gdppc", "region")) %>%
filter(., v2x_polyarchy <= 0.42) # To filter out the non-democracies.
mydata2 <- read_delim("~/Documents/Data/masskillings.txt") %>%
mutate(., masskilling = as_factor(lag(ongoing, n = 3)),
country_name = country,
country_text_id = sftgcode) %>%
select(., c("country_text_id", "year", "masskilling")) %>%
na.omit(.)
mydata3 <- read_dta("~/Documents/Data/marx.dta") %>%
drop_na(., cowcode) %>% # Some unrecognised countries (e.g., Abkhazia) cause issues here.
mutate(., country_text_id = countrycode(cowcode, origin = 'cown', destination = 'cowc')) %>%
select(., c("country_text_id", "year", "marx"))
# I am not proud of the following solution that I hacked together.
temp1 <- expand_grid(year = c(1789:2022),
country_text_id = unique(mydata1$country_text_id)) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0
)
) %>%
arrange(., country_text_id)
mydata3 <- temp1
rm(list = c("temp1"))
# Merge as necessary ----
df1 <- list(mydata1, mydata2, mydata3) %>%
reduce(left_join, by = c("country_text_id", "year"))
select(., c("country_text_id", "year", "marx"))
mydata3 <- read_dta("~/Documents/Data/marx.dta") %>%
drop_na(., cowcode) %>% # Some unrecognised countries (e.g., Abkhazia) cause issues here.
mutate(., country_text_id = countrycode(cowcode, origin = 'cown', destination = 'cowc')) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0 )) %>%
select(., c("country_text_id", "year", "marx"))
View(mydata3)
View(mydata1)
mydata3 <- read_dta("~/Documents/Data/marx.dta") %>%
drop_na(., cowcode) %>% # Some unrecognised countries (e.g., Abkhazia) cause issues here.
mutate(., country_text_id = countrycode(cowcode, origin = 'cown', destination = 'cowc')) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0 ))
mydata3 <- read_dta("~/Documents/Data/marx.dta") %>%
drop_na(., cowcode) %>% # Some unrecognised countries (e.g., Abkhazia) cause issues here.
mutate(., country_text_id = countrycode(cowcode, origin = 'cown', destination = 'cowc')) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0 )) %>%
select(., c("country_text_id", "year", "marx"))
View(mydata3)
mydata3 <- read_dta("~/Documents/Data/marx.dta") %>%
drop_na(., cowcode) %>% # Some unrecognised countries (e.g., Abkhazia) cause issues here.
mutate(., country_text_id = countrycode(cowcode, origin = 'cown', destination = 'cowc')) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0 ))
mydata3
# Load and clean data ----
mydata1 <- read_csv("~/Documents/Data/V_Dem_v13.csv") %>%
mutate(., region = as_factor(e_regionpol)) %>% # Recoding regions as factors
select(., c("country_name", "country_text_id", "year", "v2x_polyarchy", "v2x_clphy",
"v2exl_legitperf", "e_gdppc", "region")) %>%
filter(., v2x_polyarchy <= 0.42) # To filter out the non-democracies.
mydata2 <- read_delim("~/Documents/Data/masskillings.txt") %>%
mutate(., masskilling = as_factor(lag(ongoing, n = 3)),
country_name = country,
country_text_id = sftgcode) %>%
select(., c("country_text_id", "year", "masskilling")) %>%
na.omit(.)
# So, it's problematic to try and expand the years. Recreating the dataset is actually easier.
# mydata3 <- read_dta("~/Documents/Data/marx.dta") %>%
#   drop_na(., cowcode) %>% # Some unrecognised countries (e.g., Abkhazia) cause issues here.
#   mutate(., country_text_id = countrycode(cowcode, origin = 'cown', destination = 'cowc')) %>%
#   select(., c("country_text_id", "year", "marx"))
# I am not proud of the following solution that I hacked together.
mydata3 <- expand_grid(year = c(1789:2022),
country_text_id = unique(mydata1$country_text_id)) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # This one is arguable.
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0
)
) %>%
arrange(., country_text_id)
# Merge as necessary ----
df1 <- list(mydata1, mydata2, mydata3) %>%
reduce(left_join, by = c("country_text_id", "year"))
df1
unique(mydata1$country_text_id)
# So this is the solution I hacked together. Not really proud of it, but it gets the job done.
mydata3 <- expand_grid(year = c(1789:2022),
country_text_id = unique(mydata1$country_text_id)) %>%
mutate(., marx = case_when(
country_text_id == "CHN" & year > 1949 ~ 1,
country_text_id == "LAO" & year > 1975 ~ 1,
country_text_id == "VNM" & year > 1959 ~ 1,
country_text_id == "CUB" & year > 1959 ~ 1,
# country_text_id == "PRK" & year > 1945 ~ 1, # Uncomment for North Korea as communist today
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "AFG" & year > 1978 & year <= 1992 ~ 1,
country_text_id == "UKR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "BLR" & year > 1919 & year <= 1991 ~ 1,
country_text_id == "DDR" & year > 1949 & year <= 1990 ~ 1,
country_text_id == "EST" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LVA" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "LTU" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "HUN" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "AZE" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "CZE" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "TJK" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "TKM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "UZB" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "POL" & year > 1945 & year <= 1991 ~ 1,
country_text_id == "GEO" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "ARM" & year > 1920 & year <= 1991 ~ 1,
country_text_id == "MNG" & year > 1921 & year <= 1991 ~ 1,
country_text_id == "KAZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "KGZ" & year > 1936 & year <= 1991 ~ 1,
country_text_id == "ROU" & year > 1944 & year <= 1989 ~ 1,
country_text_id == "MDA" & year > 1940 & year <= 1991 ~ 1,
country_text_id == "ALB" & year > 1944 & year <= 1992 ~ 1,
country_text_id == "BGR" & year > 1944 & year <= 1990 ~ 1,
country_text_id == "RUS" & year > 1918 & year <= 1991 ~ 1,
country_text_id == "PRK" & year > 1945 & year <= 2009 ~ 1, # Comment out for PRK communist today
country_text_id == "YMD" & year > 1967 & year <= 1990 ~ 1,
country_text_id == "SDN" & year > 1969 & year <= 1985 ~ 1,
country_text_id == "SOM" & year > 1969 & year <= 1991 ~ 1,
country_text_id == "COG" & year > 1969 & year <= 1992 ~ 1,
country_text_id == "ETH" & year > 1974 & year <= 1991 ~ 1,
country_text_id == "MOZ" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "AGO" & year > 1975 & year <= 1992 ~ 1,
country_text_id == "BEN" & year > 1975 & year <= 1990 ~ 1,
country_text_id == "KHM" & year > 1976 & year <= 1992 ~ 1,
country_text_id == "BFA" & year > 1984 & year <= 1987 ~ 1,
country_text_id == "SYC" & year > 1979 & year <= 1991 ~ 1,
TRUE ~ 0
)
) %>%
arrange(., country_text_id)
# Merge as necessary ----
df1 <- list(mydata1, mydata2, mydata3) %>%
reduce(left_join, by = c("country_text_id", "year"))
# Merge as necessary ----
df1 <- list(mydata1, mydata2, mydata3) %>%
reduce(left_join, by = c("country_text_id", "year")) %>%
distinct(., country_text_id, year, .keep_all = TRUE) # Eliminate duplicates if there are any
# Merge as necessary ----
df1 <- list(mydata1, mydata2, mydata3) %>%
reduce(left_join, by = c("country_text_id", "year")) %>%
distinct(., country_text_id, year, .keep_all = TRUE)
# Save the master data to a file so as to be able to provide a replication dataset.
write_csv(df1, "~/GitHub/masterspaper")
# Save the master data to a file so as to be able to provide a replication dataset.
write_csv(df1, "kaksoy_masterpaperdata.csv")
getwd()
# Save the master data to a file so as to be able to provide a replication dataset.
write_csv(df1, "~/GitHub/masterspaper", "kaksoy_masterpaperdata.csv")
# Save the master data to a file so as to be able to provide a replication dataset.
write_csv(df1, "~/GitHub/masterspaper/", "kaksoy_masterpaperdata.csv")
# Save the master data to a file so as to be able to provide a replication dataset.
write_csv(df1, file = "~/GitHub/masterspaper/", "kaksoy_masterpaperdata.csv")
# Set working directory
setwd("~/GitHub/masterspaper")
getwd()
# Save the master data to a file so as to be able to provide a replication dataset.
write_csv(df1, "kaksoy_masterpaperdata.csv")
# Load and clean data ----
df1 <- read_csv("~/GitHub/masterspaper/kaksoy_masterpaperdata.csv")
